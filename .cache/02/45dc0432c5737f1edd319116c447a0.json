{"id":"Focm","dependencies":[{"name":"C:\\Users\\dusty\\Desktop\\WebDev\\JS\\client-side-APIs\\client-side-storage\\package.json","includedInParent":true,"mtime":1605280886599}],"generated":{"js":"var e,t=document.querySelector(\"ul\"),o=document.querySelector(\"#title\"),n=document.querySelector(\"#body\"),r=document.querySelector(\"form\"),a=document.querySelector(\"form button\");r.addEventListener(\"submit\",function(e){e.preventDefault()}),window.onload=function(){var a=window.indexedDB.open(\"notes_db\",1);function d(){for(;t.firstChild;)t.removeChild(t.firstChild);e.transaction(\"notes_os\").objectStore(\"notes_os\").openCursor().onsuccess=function(e){var o=e.target.result;if(o){var n=document.createElement(\"li\"),r=document.createElement(\"h3\"),a=document.createElement(\"p\");n.appendChild(r),n.appendChild(a),t.appendChild(n),r.textContent=o.value.title,a.textContent=o.value.body,n.setAttribute(\"data-note-id\",o.value.id);var d=document.createElement(\"button\");n.appendChild(d),d.textContent=\"Delete\",d.onclick=l,o.continue()}else{if(!t.firstChild){var c=document.createElement(\"li\");c.textContent=\"No notes stored.\",t.appendChild(c)}console.log(\"Notes all displayed\")}}}function l(o){var n=Number(o.target.parentNode.getAttribute(\"data-note-id\")),r=e.transaction([\"notes_os\"],\"readwrite\");r.objectStore(\"notes_os\").delete(n);r.oncomplete=function(){if(o.target.parentNode.parentNode.removeChild(o.target.parentNode),console.log(\"Note \"+n+\" deleted.\"),!t.firstChild){var e=document.createElement(\"li\");e.textContent=\"No notes stored.\",t.appendChild(e)}}}a.onerror=function(){console.log(\"Database failed to open\")},a.onsuccess=function(){console.log(\"Database opened successfully\"),e=a.result,d()},a.onupgradeneeded=function(e){var t=e.target.result.createObjectStore(\"notes_os\",{keyPath:\"id\",autoIncrement:!0});t.createIndex(\"title\",\"title\",{unique:!1}),t.createIndex(\"body\",\"body\",{unique:!1}),console.log(\"Database setup complete\")},r.onsubmit=function(t){t.preventDefault();var r={title:o.value,body:n.value},a=e.transaction([\"notes_os\"],\"readwrite\");a.objectStore(\"notes_os\").add(r).onsuccess=function(){o.value=\"\",n.value=\"\"},a.oncomplete=function(){console.log(\"Transaction completed: database modification finished.\"),d()},a.onerror=function(){console.log(\"Transaction not opened due to error\")}}};"},"sourceMaps":{"js":{"mappings":[{"source":"index.js","original":{"line":3,"column":0},"generated":{"line":1,"column":0}},{"source":"index.js","name":"db","original":{"line":14,"column":4},"generated":{"line":1,"column":4}},{"source":"index.js","name":"list","original":{"line":3,"column":6},"generated":{"line":1,"column":6}},{"source":"index.js","name":"document","original":{"line":3,"column":13},"generated":{"line":1,"column":8}},{"source":"index.js","name":"querySelector","original":{"line":3,"column":22},"generated":{"line":1,"column":17}},{"source":"index.js","original":{"line":3,"column":36},"generated":{"line":1,"column":31}},{"source":"index.js","name":"titleInput","original":{"line":4,"column":6},"generated":{"line":1,"column":37}},{"source":"index.js","name":"document","original":{"line":4,"column":19},"generated":{"line":1,"column":39}},{"source":"index.js","name":"querySelector","original":{"line":4,"column":28},"generated":{"line":1,"column":48}},{"source":"index.js","original":{"line":4,"column":42},"generated":{"line":1,"column":62}},{"source":"index.js","name":"bodyInput","original":{"line":5,"column":6},"generated":{"line":1,"column":72}},{"source":"index.js","name":"document","original":{"line":5,"column":18},"generated":{"line":1,"column":74}},{"source":"index.js","name":"querySelector","original":{"line":5,"column":27},"generated":{"line":1,"column":83}},{"source":"index.js","original":{"line":5,"column":41},"generated":{"line":1,"column":97}},{"source":"index.js","name":"form","original":{"line":6,"column":6},"generated":{"line":1,"column":106}},{"source":"index.js","name":"document","original":{"line":6,"column":13},"generated":{"line":1,"column":108}},{"source":"index.js","name":"querySelector","original":{"line":6,"column":22},"generated":{"line":1,"column":117}},{"source":"index.js","original":{"line":6,"column":36},"generated":{"line":1,"column":131}},{"source":"index.js","name":"submitBtn","original":{"line":7,"column":6},"generated":{"line":1,"column":139}},{"source":"index.js","name":"document","original":{"line":7,"column":18},"generated":{"line":1,"column":141}},{"source":"index.js","name":"querySelector","original":{"line":7,"column":27},"generated":{"line":1,"column":150}},{"source":"index.js","original":{"line":7,"column":41},"generated":{"line":1,"column":164}},{"source":"index.js","name":"form","original":{"line":9,"column":0},"generated":{"line":1,"column":179}},{"source":"index.js","name":"addEventListener","original":{"line":9,"column":5},"generated":{"line":1,"column":181}},{"source":"index.js","original":{"line":9,"column":22},"generated":{"line":1,"column":198}},{"source":"index.js","original":{"line":9,"column":32},"generated":{"line":1,"column":207}},{"source":"index.js","name":"e","original":{"line":9,"column":41},"generated":{"line":1,"column":216}},{"source":"index.js","name":"e","original":{"line":10,"column":4},"generated":{"line":1,"column":219}},{"source":"index.js","name":"preventDefault","original":{"line":10,"column":6},"generated":{"line":1,"column":221}},{"source":"index.js","name":"window","original":{"line":16,"column":0},"generated":{"line":1,"column":240}},{"source":"index.js","name":"onload","original":{"line":16,"column":7},"generated":{"line":1,"column":247}},{"source":"index.js","original":{"line":16,"column":16},"generated":{"line":1,"column":254}},{"source":"index.js","name":"request","original":{"line":17,"column":8},"generated":{"line":1,"column":265}},{"source":"index.js","name":"request","original":{"line":17,"column":8},"generated":{"line":1,"column":269}},{"source":"index.js","name":"window","original":{"line":17,"column":18},"generated":{"line":1,"column":271}},{"source":"index.js","name":"indexedDB","original":{"line":17,"column":25},"generated":{"line":1,"column":278}},{"source":"index.js","name":"open","original":{"line":17,"column":35},"generated":{"line":1,"column":288}},{"source":"index.js","original":{"line":17,"column":40},"generated":{"line":1,"column":293}},{"source":"index.js","original":{"line":17,"column":52},"generated":{"line":1,"column":304}},{"source":"index.js","name":"displayData","original":{"line":87,"column":13},"generated":{"line":1,"column":307}},{"source":"index.js","name":"displayData","original":{"line":87,"column":13},"generated":{"line":1,"column":316}},{"source":"index.js","name":"list","original":{"line":90,"column":15},"generated":{"line":1,"column":320}},{"source":"index.js","name":"list","original":{"line":90,"column":15},"generated":{"line":1,"column":325}},{"source":"index.js","name":"firstChild","original":{"line":90,"column":20},"generated":{"line":1,"column":327}},{"source":"index.js","name":"list","original":{"line":91,"column":12},"generated":{"line":1,"column":339}},{"source":"index.js","name":"removeChild","original":{"line":91,"column":17},"generated":{"line":1,"column":341}},{"source":"index.js","name":"list","original":{"line":91,"column":29},"generated":{"line":1,"column":353}},{"source":"index.js","name":"firstChild","original":{"line":91,"column":34},"generated":{"line":1,"column":355}},{"source":"index.js","name":"db","original":{"line":97,"column":26},"generated":{"line":1,"column":367}},{"source":"index.js","name":"transaction","original":{"line":97,"column":29},"generated":{"line":1,"column":369}},{"source":"index.js","original":{"line":97,"column":41},"generated":{"line":1,"column":381}},{"source":"index.js","name":"objectStore","original":{"line":97,"column":53},"generated":{"line":1,"column":393}},{"source":"index.js","original":{"line":97,"column":65},"generated":{"line":1,"column":405}},{"source":"index.js","name":"openCursor","original":{"line":98,"column":20},"generated":{"line":1,"column":417}},{"source":"index.js","name":"onsuccess","original":{"line":98,"column":33},"generated":{"line":1,"column":430}},{"source":"index.js","original":{"line":98,"column":45},"generated":{"line":1,"column":440}},{"source":"index.js","name":"e","original":{"line":98,"column":54},"generated":{"line":1,"column":449}},{"source":"index.js","name":"cursor","original":{"line":100,"column":16},"generated":{"line":1,"column":452}},{"source":"index.js","name":"cursor","original":{"line":100,"column":16},"generated":{"line":1,"column":456}},{"source":"index.js","name":"e","original":{"line":100,"column":25},"generated":{"line":1,"column":458}},{"source":"index.js","name":"target","original":{"line":100,"column":27},"generated":{"line":1,"column":460}},{"source":"index.js","name":"result","original":{"line":100,"column":34},"generated":{"line":1,"column":467}},{"source":"index.js","name":"cursor","original":{"line":103,"column":15},"generated":{"line":1,"column":474}},{"source":"index.js","name":"cursor","original":{"line":103,"column":15},"generated":{"line":1,"column":477}},{"source":"index.js","original":{"line":103,"column":23},"generated":{"line":1,"column":479}},{"source":"index.js","name":"listItem","original":{"line":106,"column":22},"generated":{"line":1,"column":480}},{"source":"index.js","name":"listItem","original":{"line":106,"column":22},"generated":{"line":1,"column":484}},{"source":"index.js","name":"document","original":{"line":106,"column":33},"generated":{"line":1,"column":486}},{"source":"index.js","name":"createElement","original":{"line":106,"column":42},"generated":{"line":1,"column":495}},{"source":"index.js","original":{"line":106,"column":56},"generated":{"line":1,"column":509}},{"source":"index.js","name":"h3","original":{"line":107,"column":22},"generated":{"line":1,"column":515}},{"source":"index.js","name":"document","original":{"line":107,"column":27},"generated":{"line":1,"column":517}},{"source":"index.js","name":"createElement","original":{"line":107,"column":36},"generated":{"line":1,"column":526}},{"source":"index.js","original":{"line":107,"column":50},"generated":{"line":1,"column":540}},{"source":"index.js","name":"para","original":{"line":108,"column":22},"generated":{"line":1,"column":546}},{"source":"index.js","name":"document","original":{"line":108,"column":29},"generated":{"line":1,"column":548}},{"source":"index.js","name":"createElement","original":{"line":108,"column":38},"generated":{"line":1,"column":557}},{"source":"index.js","original":{"line":108,"column":52},"generated":{"line":1,"column":571}},{"source":"index.js","name":"listItem","original":{"line":110,"column":16},"generated":{"line":1,"column":576}},{"source":"index.js","name":"appendChild","original":{"line":110,"column":25},"generated":{"line":1,"column":578}},{"source":"index.js","name":"h3","original":{"line":110,"column":37},"generated":{"line":1,"column":590}},{"source":"index.js","name":"listItem","original":{"line":111,"column":16},"generated":{"line":1,"column":593}},{"source":"index.js","name":"appendChild","original":{"line":111,"column":25},"generated":{"line":1,"column":595}},{"source":"index.js","name":"para","original":{"line":111,"column":37},"generated":{"line":1,"column":607}},{"source":"index.js","name":"list","original":{"line":112,"column":16},"generated":{"line":1,"column":610}},{"source":"index.js","name":"appendChild","original":{"line":112,"column":21},"generated":{"line":1,"column":612}},{"source":"index.js","name":"listItem","original":{"line":112,"column":33},"generated":{"line":1,"column":624}},{"source":"index.js","name":"h3","original":{"line":115,"column":16},"generated":{"line":1,"column":627}},{"source":"index.js","name":"textContent","original":{"line":115,"column":19},"generated":{"line":1,"column":629}},{"source":"index.js","name":"cursor","original":{"line":115,"column":33},"generated":{"line":1,"column":641}},{"source":"index.js","name":"value","original":{"line":115,"column":40},"generated":{"line":1,"column":643}},{"source":"index.js","name":"title","original":{"line":115,"column":46},"generated":{"line":1,"column":649}},{"source":"index.js","name":"para","original":{"line":116,"column":16},"generated":{"line":1,"column":655}},{"source":"index.js","name":"textContent","original":{"line":116,"column":21},"generated":{"line":1,"column":657}},{"source":"index.js","name":"cursor","original":{"line":116,"column":35},"generated":{"line":1,"column":669}},{"source":"index.js","name":"value","original":{"line":116,"column":42},"generated":{"line":1,"column":671}},{"source":"index.js","name":"body","original":{"line":116,"column":48},"generated":{"line":1,"column":677}},{"source":"index.js","name":"listItem","original":{"line":120,"column":16},"generated":{"line":1,"column":682}},{"source":"index.js","name":"setAttribute","original":{"line":120,"column":25},"generated":{"line":1,"column":684}},{"source":"index.js","original":{"line":120,"column":38},"generated":{"line":1,"column":697}},{"source":"index.js","name":"cursor","original":{"line":120,"column":54},"generated":{"line":1,"column":712}},{"source":"index.js","name":"value","original":{"line":120,"column":61},"generated":{"line":1,"column":714}},{"source":"index.js","name":"id","original":{"line":120,"column":67},"generated":{"line":1,"column":720}},{"source":"index.js","name":"deleteBtn","original":{"line":123,"column":22},"generated":{"line":1,"column":724}},{"source":"index.js","name":"deleteBtn","original":{"line":123,"column":22},"generated":{"line":1,"column":728}},{"source":"index.js","name":"document","original":{"line":123,"column":34},"generated":{"line":1,"column":730}},{"source":"index.js","name":"createElement","original":{"line":123,"column":43},"generated":{"line":1,"column":739}},{"source":"index.js","original":{"line":123,"column":57},"generated":{"line":1,"column":753}},{"source":"index.js","name":"listItem","original":{"line":124,"column":16},"generated":{"line":1,"column":763}},{"source":"index.js","name":"appendChild","original":{"line":124,"column":25},"generated":{"line":1,"column":765}},{"source":"index.js","name":"deleteBtn","original":{"line":124,"column":37},"generated":{"line":1,"column":777}},{"source":"index.js","name":"deleteBtn","original":{"line":125,"column":16},"generated":{"line":1,"column":780}},{"source":"index.js","name":"textContent","original":{"line":125,"column":26},"generated":{"line":1,"column":782}},{"source":"index.js","original":{"line":125,"column":40},"generated":{"line":1,"column":794}},{"source":"index.js","name":"deleteBtn","original":{"line":129,"column":16},"generated":{"line":1,"column":803}},{"source":"index.js","name":"onclick","original":{"line":129,"column":26},"generated":{"line":1,"column":805}},{"source":"index.js","name":"deleteItem","original":{"line":129,"column":36},"generated":{"line":1,"column":813}},{"source":"index.js","name":"cursor","original":{"line":132,"column":16},"generated":{"line":1,"column":815}},{"source":"index.js","name":"continue","original":{"line":132,"column":23},"generated":{"line":1,"column":817}},{"source":"index.js","original":{"line":133,"column":19},"generated":{"line":1,"column":832}},{"source":"index.js","original":{"line":135,"column":19},"generated":{"line":1,"column":833}},{"source":"index.js","name":"list","original":{"line":135,"column":20},"generated":{"line":1,"column":837}},{"source":"index.js","name":"firstChild","original":{"line":135,"column":25},"generated":{"line":1,"column":839}},{"source":"index.js","original":{"line":135,"column":37},"generated":{"line":1,"column":850}},{"source":"index.js","name":"listItem","original":{"line":136,"column":26},"generated":{"line":1,"column":851}},{"source":"index.js","name":"listItem","original":{"line":136,"column":26},"generated":{"line":1,"column":855}},{"source":"index.js","name":"document","original":{"line":136,"column":37},"generated":{"line":1,"column":857}},{"source":"index.js","name":"createElement","original":{"line":136,"column":46},"generated":{"line":1,"column":866}},{"source":"index.js","original":{"line":136,"column":60},"generated":{"line":1,"column":880}},{"source":"index.js","name":"listItem","original":{"line":137,"column":20},"generated":{"line":1,"column":886}},{"source":"index.js","name":"textContent","original":{"line":137,"column":29},"generated":{"line":1,"column":888}},{"source":"index.js","original":{"line":137,"column":43},"generated":{"line":1,"column":900}},{"source":"index.js","name":"list","original":{"line":138,"column":20},"generated":{"line":1,"column":919}},{"source":"index.js","name":"appendChild","original":{"line":138,"column":25},"generated":{"line":1,"column":921}},{"source":"index.js","name":"listItem","original":{"line":138,"column":37},"generated":{"line":1,"column":933}},{"source":"index.js","name":"console","original":{"line":141,"column":16},"generated":{"line":1,"column":936}},{"source":"index.js","name":"log","original":{"line":141,"column":24},"generated":{"line":1,"column":944}},{"source":"index.js","original":{"line":141,"column":28},"generated":{"line":1,"column":948}},{"source":"index.js","name":"deleteItem","original":{"line":147,"column":13},"generated":{"line":1,"column":973}},{"source":"index.js","name":"deleteItem","original":{"line":147,"column":13},"generated":{"line":1,"column":982}},{"source":"index.js","name":"e","original":{"line":147,"column":24},"generated":{"line":1,"column":984}},{"source":"index.js","name":"noteId","original":{"line":151,"column":12},"generated":{"line":1,"column":987}},{"source":"index.js","name":"noteId","original":{"line":151,"column":12},"generated":{"line":1,"column":991}},{"source":"index.js","name":"Number","original":{"line":151,"column":21},"generated":{"line":1,"column":993}},{"source":"index.js","name":"e","original":{"line":151,"column":28},"generated":{"line":1,"column":1000}},{"source":"index.js","name":"target","original":{"line":151,"column":30},"generated":{"line":1,"column":1002}},{"source":"index.js","name":"parentNode","original":{"line":151,"column":37},"generated":{"line":1,"column":1009}},{"source":"index.js","name":"getAttribute","original":{"line":151,"column":48},"generated":{"line":1,"column":1020}},{"source":"index.js","original":{"line":151,"column":61},"generated":{"line":1,"column":1033}},{"source":"index.js","name":"transaction","original":{"line":154,"column":12},"generated":{"line":1,"column":1050}},{"source":"index.js","name":"db","original":{"line":154,"column":26},"generated":{"line":1,"column":1052}},{"source":"index.js","name":"transaction","original":{"line":154,"column":29},"generated":{"line":1,"column":1054}},{"source":"index.js","original":{"line":154,"column":41},"generated":{"line":1,"column":1066}},{"source":"index.js","original":{"line":154,"column":42},"generated":{"line":1,"column":1067}},{"source":"index.js","original":{"line":154,"column":55},"generated":{"line":1,"column":1079}},{"source":"index.js","name":"transaction","original":{"line":155,"column":26},"generated":{"line":1,"column":1092}},{"source":"index.js","name":"objectStore","original":{"line":155,"column":38},"generated":{"line":1,"column":1094}},{"source":"index.js","original":{"line":155,"column":50},"generated":{"line":1,"column":1106}},{"source":"index.js","name":"delete","original":{"line":156,"column":34},"generated":{"line":1,"column":1118}},{"source":"index.js","name":"noteId","original":{"line":156,"column":41},"generated":{"line":1,"column":1125}},{"source":"index.js","name":"transaction","original":{"line":159,"column":8},"generated":{"line":1,"column":1128}},{"source":"index.js","name":"oncomplete","original":{"line":159,"column":20},"generated":{"line":1,"column":1130}},{"source":"index.js","original":{"line":159,"column":33},"generated":{"line":1,"column":1141}},{"source":"index.js","original":{"line":166,"column":13},"generated":{"line":1,"column":1152}},{"source":"index.js","name":"e","original":{"line":162,"column":10},"generated":{"line":1,"column":1155}},{"source":"index.js","name":"target","original":{"line":162,"column":12},"generated":{"line":1,"column":1157}},{"source":"index.js","name":"parentNode","original":{"line":162,"column":19},"generated":{"line":1,"column":1164}},{"source":"index.js","name":"parentNode","original":{"line":162,"column":30},"generated":{"line":1,"column":1175}},{"source":"index.js","name":"removeChild","original":{"line":162,"column":41},"generated":{"line":1,"column":1186}},{"source":"index.js","name":"e","original":{"line":162,"column":53},"generated":{"line":1,"column":1198}},{"source":"index.js","name":"target","original":{"line":162,"column":55},"generated":{"line":1,"column":1200}},{"source":"index.js","name":"parentNode","original":{"line":162,"column":62},"generated":{"line":1,"column":1207}},{"source":"index.js","name":"console","original":{"line":163,"column":10},"generated":{"line":1,"column":1219}},{"source":"index.js","name":"log","original":{"line":163,"column":18},"generated":{"line":1,"column":1227}},{"source":"index.js","original":{"line":163,"column":22},"generated":{"line":1,"column":1231}},{"source":"index.js","name":"noteId","original":{"line":163,"column":32},"generated":{"line":1,"column":1239}},{"source":"index.js","original":{"line":163,"column":41},"generated":{"line":1,"column":1241}},{"source":"index.js","name":"list","original":{"line":166,"column":14},"generated":{"line":1,"column":1255}},{"source":"index.js","name":"firstChild","original":{"line":166,"column":19},"generated":{"line":1,"column":1257}},{"source":"index.js","original":{"line":166,"column":31},"generated":{"line":1,"column":1268}},{"source":"index.js","name":"listItem","original":{"line":167,"column":16},"generated":{"line":1,"column":1269}},{"source":"index.js","name":"listItem","original":{"line":167,"column":16},"generated":{"line":1,"column":1273}},{"source":"index.js","name":"document","original":{"line":167,"column":27},"generated":{"line":1,"column":1275}},{"source":"index.js","name":"createElement","original":{"line":167,"column":36},"generated":{"line":1,"column":1284}},{"source":"index.js","original":{"line":167,"column":50},"generated":{"line":1,"column":1298}},{"source":"index.js","name":"listItem","original":{"line":168,"column":12},"generated":{"line":1,"column":1304}},{"source":"index.js","name":"textContent","original":{"line":168,"column":21},"generated":{"line":1,"column":1306}},{"source":"index.js","original":{"line":168,"column":35},"generated":{"line":1,"column":1318}},{"source":"index.js","name":"list","original":{"line":169,"column":12},"generated":{"line":1,"column":1337}},{"source":"index.js","name":"appendChild","original":{"line":169,"column":17},"generated":{"line":1,"column":1339}},{"source":"index.js","name":"listItem","original":{"line":169,"column":29},"generated":{"line":1,"column":1351}},{"source":"index.js","name":"request","original":{"line":19,"column":4},"generated":{"line":1,"column":1356}},{"source":"index.js","name":"onerror","original":{"line":19,"column":12},"generated":{"line":1,"column":1358}},{"source":"index.js","original":{"line":19,"column":22},"generated":{"line":1,"column":1366}},{"source":"index.js","name":"console","original":{"line":20,"column":8},"generated":{"line":1,"column":1377}},{"source":"index.js","name":"log","original":{"line":20,"column":16},"generated":{"line":1,"column":1385}},{"source":"index.js","original":{"line":20,"column":20},"generated":{"line":1,"column":1389}},{"source":"index.js","name":"request","original":{"line":24,"column":4},"generated":{"line":1,"column":1417}},{"source":"index.js","name":"onsuccess","original":{"line":24,"column":12},"generated":{"line":1,"column":1419}},{"source":"index.js","original":{"line":24,"column":24},"generated":{"line":1,"column":1429}},{"source":"index.js","name":"console","original":{"line":25,"column":8},"generated":{"line":1,"column":1440}},{"source":"index.js","name":"log","original":{"line":25,"column":16},"generated":{"line":1,"column":1448}},{"source":"index.js","original":{"line":25,"column":20},"generated":{"line":1,"column":1452}},{"source":"index.js","name":"db","original":{"line":28,"column":8},"generated":{"line":1,"column":1484}},{"source":"index.js","name":"request","original":{"line":28,"column":13},"generated":{"line":1,"column":1486}},{"source":"index.js","name":"result","original":{"line":28,"column":21},"generated":{"line":1,"column":1488}},{"source":"index.js","name":"displayData","original":{"line":31,"column":8},"generated":{"line":1,"column":1495}},{"source":"index.js","name":"request","original":{"line":35,"column":4},"generated":{"line":1,"column":1500}},{"source":"index.js","name":"onupgradeneeded","original":{"line":35,"column":12},"generated":{"line":1,"column":1502}},{"source":"index.js","original":{"line":35,"column":30},"generated":{"line":1,"column":1518}},{"source":"index.js","name":"e","original":{"line":35,"column":39},"generated":{"line":1,"column":1527}},{"source":"index.js","name":"db","original":{"line":37,"column":12},"generated":{"line":1,"column":1530}},{"source":"index.js","name":"objectStore","original":{"line":41,"column":12},"generated":{"line":1,"column":1534}},{"source":"index.js","name":"e","original":{"line":37,"column":17},"generated":{"line":1,"column":1536}},{"source":"index.js","name":"target","original":{"line":37,"column":19},"generated":{"line":1,"column":1538}},{"source":"index.js","name":"result","original":{"line":37,"column":26},"generated":{"line":1,"column":1545}},{"source":"index.js","name":"createObjectStore","original":{"line":41,"column":29},"generated":{"line":1,"column":1552}},{"source":"index.js","original":{"line":41,"column":47},"generated":{"line":1,"column":1570}},{"source":"index.js","original":{"line":41,"column":59},"generated":{"line":1,"column":1581}},{"source":"index.js","name":"keyPath","original":{"line":41,"column":61},"generated":{"line":1,"column":1582}},{"source":"index.js","original":{"line":41,"column":70},"generated":{"line":1,"column":1590}},{"source":"index.js","name":"autoIncrement","original":{"line":41,"column":76},"generated":{"line":1,"column":1595}},{"source":"index.js","original":{"line":41,"column":90},"generated":{"line":1,"column":1610}},{"source":"index.js","name":"objectStore","original":{"line":44,"column":8},"generated":{"line":1,"column":1614}},{"source":"index.js","name":"createIndex","original":{"line":44,"column":20},"generated":{"line":1,"column":1616}},{"source":"index.js","original":{"line":44,"column":32},"generated":{"line":1,"column":1628}},{"source":"index.js","original":{"line":44,"column":41},"generated":{"line":1,"column":1636}},{"source":"index.js","original":{"line":44,"column":50},"generated":{"line":1,"column":1644}},{"source":"index.js","name":"unique","original":{"line":44,"column":52},"generated":{"line":1,"column":1645}},{"source":"index.js","original":{"line":44,"column":60},"generated":{"line":1,"column":1653}},{"source":"index.js","name":"objectStore","original":{"line":45,"column":8},"generated":{"line":1,"column":1657}},{"source":"index.js","name":"createIndex","original":{"line":45,"column":20},"generated":{"line":1,"column":1659}},{"source":"index.js","original":{"line":45,"column":32},"generated":{"line":1,"column":1671}},{"source":"index.js","original":{"line":45,"column":40},"generated":{"line":1,"column":1678}},{"source":"index.js","original":{"line":45,"column":48},"generated":{"line":1,"column":1685}},{"source":"index.js","name":"unique","original":{"line":45,"column":50},"generated":{"line":1,"column":1686}},{"source":"index.js","original":{"line":45,"column":58},"generated":{"line":1,"column":1694}},{"source":"index.js","name":"console","original":{"line":47,"column":8},"generated":{"line":1,"column":1698}},{"source":"index.js","name":"log","original":{"line":47,"column":16},"generated":{"line":1,"column":1706}},{"source":"index.js","original":{"line":47,"column":20},"generated":{"line":1,"column":1710}},{"source":"index.js","name":"form","original":{"line":51,"column":4},"generated":{"line":1,"column":1738}},{"source":"index.js","name":"onsubmit","original":{"line":51,"column":9},"generated":{"line":1,"column":1740}},{"source":"index.js","name":"addData","original":{"line":53,"column":13},"generated":{"line":1,"column":1749}},{"source":"index.js","name":"e","original":{"line":53,"column":21},"generated":{"line":1,"column":1758}},{"source":"index.js","name":"e","original":{"line":54,"column":8},"generated":{"line":1,"column":1761}},{"source":"index.js","name":"preventDefault","original":{"line":54,"column":10},"generated":{"line":1,"column":1763}},{"source":"index.js","name":"newItem","original":{"line":57,"column":12},"generated":{"line":1,"column":1780}},{"source":"index.js","name":"newItem","original":{"line":57,"column":12},"generated":{"line":1,"column":1784}},{"source":"index.js","original":{"line":57,"column":22},"generated":{"line":1,"column":1786}},{"source":"index.js","name":"title","original":{"line":57,"column":24},"generated":{"line":1,"column":1787}},{"source":"index.js","name":"titleInput","original":{"line":57,"column":31},"generated":{"line":1,"column":1793}},{"source":"index.js","name":"value","original":{"line":57,"column":42},"generated":{"line":1,"column":1795}},{"source":"index.js","name":"body","original":{"line":57,"column":49},"generated":{"line":1,"column":1801}},{"source":"index.js","name":"bodyInput","original":{"line":57,"column":55},"generated":{"line":1,"column":1806}},{"source":"index.js","name":"value","original":{"line":57,"column":65},"generated":{"line":1,"column":1808}},{"source":"index.js","name":"transaction","original":{"line":60,"column":12},"generated":{"line":1,"column":1815}},{"source":"index.js","name":"db","original":{"line":60,"column":26},"generated":{"line":1,"column":1817}},{"source":"index.js","name":"transaction","original":{"line":60,"column":29},"generated":{"line":1,"column":1819}},{"source":"index.js","original":{"line":60,"column":41},"generated":{"line":1,"column":1831}},{"source":"index.js","original":{"line":60,"column":42},"generated":{"line":1,"column":1832}},{"source":"index.js","original":{"line":60,"column":55},"generated":{"line":1,"column":1844}},{"source":"index.js","name":"transaction","original":{"line":63,"column":26},"generated":{"line":1,"column":1857}},{"source":"index.js","name":"objectStore","original":{"line":63,"column":38},"generated":{"line":1,"column":1859}},{"source":"index.js","original":{"line":63,"column":50},"generated":{"line":1,"column":1871}},{"source":"index.js","name":"add","original":{"line":66,"column":34},"generated":{"line":1,"column":1883}},{"source":"index.js","name":"newItem","original":{"line":66,"column":38},"generated":{"line":1,"column":1887}},{"source":"index.js","name":"onsuccess","original":{"line":67,"column":16},"generated":{"line":1,"column":1890}},{"source":"index.js","original":{"line":67,"column":28},"generated":{"line":1,"column":1900}},{"source":"index.js","name":"titleInput","original":{"line":69,"column":12},"generated":{"line":1,"column":1911}},{"source":"index.js","name":"value","original":{"line":69,"column":23},"generated":{"line":1,"column":1913}},{"source":"index.js","original":{"line":69,"column":31},"generated":{"line":1,"column":1919}},{"source":"index.js","name":"bodyInput","original":{"line":70,"column":12},"generated":{"line":1,"column":1922}},{"source":"index.js","name":"value","original":{"line":70,"column":22},"generated":{"line":1,"column":1924}},{"source":"index.js","original":{"line":70,"column":30},"generated":{"line":1,"column":1930}},{"source":"index.js","name":"transaction","original":{"line":74,"column":8},"generated":{"line":1,"column":1934}},{"source":"index.js","name":"oncomplete","original":{"line":74,"column":20},"generated":{"line":1,"column":1936}},{"source":"index.js","original":{"line":74,"column":33},"generated":{"line":1,"column":1947}},{"source":"index.js","name":"console","original":{"line":75,"column":12},"generated":{"line":1,"column":1958}},{"source":"index.js","name":"log","original":{"line":75,"column":20},"generated":{"line":1,"column":1966}},{"source":"index.js","original":{"line":75,"column":24},"generated":{"line":1,"column":1970}},{"source":"index.js","name":"displayData","original":{"line":78,"column":12},"generated":{"line":1,"column":2028}},{"source":"index.js","name":"transaction","original":{"line":81,"column":8},"generated":{"line":1,"column":2033}},{"source":"index.js","name":"onerror","original":{"line":81,"column":20},"generated":{"line":1,"column":2035}},{"source":"index.js","original":{"line":81,"column":30},"generated":{"line":1,"column":2043}},{"source":"index.js","name":"console","original":{"line":82,"column":12},"generated":{"line":1,"column":2054}},{"source":"index.js","name":"log","original":{"line":82,"column":20},"generated":{"line":1,"column":2062}},{"source":"index.js","original":{"line":82,"column":24},"generated":{"line":1,"column":2066}}],"sources":{"index.js":"// IndexedDB API\r\n// Create needed constants\r\nconst list = document.querySelector('ul');\r\nconst titleInput = document.querySelector('#title');\r\nconst bodyInput = document.querySelector('#body');\r\nconst form = document.querySelector('form');\r\nconst submitBtn = document.querySelector('form button');\r\n\r\nform.addEventListener('submit', function(e) {\r\n    e.preventDefault();\r\n})\r\n\r\n// Create an instance of a db object for us to store the open database in\r\nlet db;\r\n\r\nwindow.onload = function() {\r\n    let request = window.indexedDB.open('notes_db', 1);\r\n    // onerror handler signifies that the database didn't open successfully\r\n    request.onerror = function() {\r\n        console.log('Database failed to open')\r\n    }\r\n\r\n    // onsuccess handler signifies that the database opened successfully\r\n    request.onsuccess = function() {\r\n        console.log('Database opened successfully');\r\n\r\n         // Store the opened database object in the db variable. This is used a lot below\r\n        db = request.result;\r\n\r\n        // Run the displayData() function to display the notes already in the IDB\r\n        displayData();\r\n    };\r\n\r\n    // Setup the database tables if this has not already been done\r\n    request.onupgradeneeded = function(e) {\r\n        // Grab a reference to the opened database\r\n        let db = e.target.result;\r\n\r\n        // Create an objectStore to store our notes in (basically like a single table)\r\n        // including a auto-incrementing key\r\n        let objectStore = db.createObjectStore('notes_os', { keyPath: 'id', autoIncrement:true });\r\n\r\n        // Define what data items the objectStore will contain\r\n        objectStore.createIndex('title', 'title', { unique: false });\r\n        objectStore.createIndex('body', 'body', { unique: false });\r\n\r\n        console.log('Database setup complete');\r\n    },\r\n\r\n    // Create an onsubmit handler so that when the form is submitted the addData() function is run\r\n    form.onsubmit = addData;\r\n\r\n    function addData(e) {\r\n        e.preventDefault();\r\n\r\n        // grab the values entered into the form fields and store them in an object ready for being inserted into the DB\r\n        let newItem = { title: titleInput.value, body: bodyInput.value };\r\n\r\n        // open a read/write db transaction, ready for adding the data\r\n        let transaction = db.transaction(['notes_os'], 'readwrite');\r\n\r\n        // call an object store that's already been added to the database\r\n        let objectStore = transaction.objectStore('notes_os');\r\n\r\n        // Make a request to add our newItem object to the object store\r\n        var request = objectStore.add(newItem);\r\n        request.onsuccess = function() {\r\n            // Clear the form, ready for adding the next entry\r\n            titleInput.value = '';\r\n            bodyInput.value = '';\r\n        };\r\n\r\n        // Report on the success of the transaction completing, when everything is done\r\n        transaction.oncomplete = function() {\r\n            console.log('Transaction completed: database modification finished.');\r\n\r\n            // update the display of data to show the newly added item, by running displayData() again.\r\n            displayData();\r\n        };\r\n\r\n        transaction.onerror = function() {\r\n            console.log('Transaction not opened due to error');\r\n          };\r\n    }\r\n\r\n    // Displaying data\r\n    function displayData() {\r\n        // Here we empty the contents of the list element each time the display is updated\r\n        // If you didn't do this, you'd get duplicates listed each time a new note is added\r\n        while (list.firstChild){\r\n            list.removeChild(list.firstChild);\r\n        }\r\n\r\n        // Open our object store and then get a cursor - which iterates through all the\r\n        // different data items in the store\r\n        \r\n        let objectStore = db.transaction('notes_os').objectStore('notes_os');\r\n        objectStore.openCursor().onsuccess = function(e) {\r\n            // Get a reference to the cursor\r\n            let cursor = e.target.result;\r\n\r\n            // If there is still another data item to iterate through, keep running this code\r\n            if(cursor) {\r\n                // Create a list item, h3, and p to put each data item inside when displaying it\r\n                // structure the HTML fragment, and append it inside the list\r\n                const listItem = document.createElement('li');\r\n                const h3 = document.createElement('h3');\r\n                const para = document.createElement('p');\r\n\r\n                listItem.appendChild(h3);\r\n                listItem.appendChild(para);\r\n                list.appendChild(listItem);\r\n\r\n                // Put the data from the cursor inside the h3 and para\r\n                h3.textContent = cursor.value.title;\r\n                para.textContent = cursor.value.body;\r\n\r\n                // Store the ID of the data item inside an attribute on the listItem, so we know\r\n                // which item it corresponds to. This will be useful later when we want to delete items\r\n                listItem.setAttribute('data-note-id', cursor.value.id);\r\n\r\n                // Create a button and place it inside each listItem\r\n                const deleteBtn = document.createElement('button');\r\n                listItem.appendChild(deleteBtn);\r\n                deleteBtn.textContent = 'Delete';\r\n\r\n                // Set an event handler so that when the button is clicked, the deleteItem()\r\n                // function is run\r\n                deleteBtn.onclick = deleteItem;\r\n\r\n                // Iterate to the next item in the cursor\r\n                cursor.continue();\r\n            } else {\r\n                // Again, if list item is empty, display a 'No notes stored' message\r\n                if(!list.firstChild) {\r\n                    const listItem = document.createElement('li');\r\n                    listItem.textContent = 'No notes stored.';\r\n                    list.appendChild(listItem);\r\n                }\r\n                // if there are no more cursor items to iterate through, say so\r\n                console.log('Notes all displayed');\r\n            }\r\n        };\r\n\r\n    }\r\n\r\n    function deleteItem(e) {\r\n        // retrieve the name of the task we want to delete. We need\r\n        // to convert it to a number before trying it use it with IDB; IDB key\r\n        // values are type-sensitive.\r\n        let noteId = Number(e.target.parentNode.getAttribute('data-note-id'));\r\n      \r\n        // open a database transaction and delete the task, finding it using the id we retrieved above\r\n        let transaction = db.transaction(['notes_os'], 'readwrite');\r\n        let objectStore = transaction.objectStore('notes_os');\r\n        let request = objectStore.delete(noteId);\r\n      \r\n        // report that the data item has been deleted\r\n        transaction.oncomplete = function() {\r\n          // delete the parent of the button\r\n          // which is the list item, so it is no longer displayed\r\n          e.target.parentNode.parentNode.removeChild(e.target.parentNode);\r\n          console.log('Note ' + noteId + ' deleted.');\r\n      \r\n          // Again, if list item is empty, display a 'No notes stored' message\r\n          if(!list.firstChild) {\r\n            let listItem = document.createElement('li');\r\n            listItem.textContent = 'No notes stored.';\r\n            list.appendChild(listItem);\r\n          }\r\n        };\r\n      }\r\n    \r\n}\r\n\r\n"},"lineCount":null}},"error":null,"hash":"05fb81ca610603e9c328d1b6098fff80","cacheData":{"env":{}}}